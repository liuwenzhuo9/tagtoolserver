(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d0e020d"],{"0e4e":function(t,e,n){"use strict";var a=n("1783"),r=n.n(a);r.a},1783:function(t,e,n){},"2cf0":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tagEntity"},[t._v("\n    第"+t._s(t.textIndex)+"句：\n    "),n("div",{staticClass:"inputarea"},[t._v(t._s(t.textarea))]),n("div",{staticClass:"button"},[t.isMarked?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addTag()}}},[t._v("添加标签")]):t._e(),t.isMarked?n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){return t.saveTag()}}},[t._v("保存标记")]):t._e(),n("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left",size:"small"},on:{click:function(e){return t.turnTo(1)}}},[t._v("上一句")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.turnTo(2)}}},[t._v("下一句"),n("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1),n("div",{staticClass:"tagarea"},t._l(t.dynamicTags,(function(e,a){return n("el-tag",{key:a,attrs:{closable:"","disable-transitions":!1},on:{close:function(n){return t.handleClose(e.content,a)}}},[t._v("\n            "+t._s(e.content)+" ("+t._s(e.startIdx)+","+t._s(e.endIdx)+")\n        ")])})),1)])},r=[],s=(n("6b54"),n("96cf"),n("3b8d")),i=n("6234"),c={data:function(){return{textIndex:"",textareaId:"",dynamicTags:[],dynamicTagsPre:[],dynamicTagsNow:[],textarea:"",isMarked:!0}},mounted:function(){this.setTextarea()},methods:{setTextarea:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$store.state.content){t.next=9;break}return this.textarea=this.$store.state.content,this.textIndex=this.$store.state.index,t.next=5,Object(i["f"])({content:this.textarea});case 5:e=t.sent,this.textareaId=e.data,t.next=14;break;case 9:return t.next=11,Object(i["l"])();case 11:n=t.sent,this.textarea=n.data[0].content,this.textareaId=n.data[0].id;case 14:return t.next=16,Object(i["g"])({id:this.textareaId});case 16:return a=t.sent,this.textIndex=a.data,t.next=20,this.preTag();case 20:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),preTag:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["i"])();case 2:e=t.sent,e.data.map((function(t){for(var e=0;-1!=n.textarea.indexOf(t.content,e);){var a=n.textarea.indexOf(t.content,e),r=a+t.length;e=r+1;var s=[];s={content:t.content,startIdx:a,endIdx:r,id:t.id},n.dynamicTagsPre.push(s)}})),this.dynamicTags=this.dynamicTags.concat(this.dynamicTagsPre);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addTag:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,c,o,u,d,f,h,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.getSelection?e=window.getSelection():window.document.getSelection?e=window.document.getSelection():window.document.selection&&(e=window.document.selection.createRange().text),n=e.toString(),a=e.anchorOffset,r=e.focusOffset,c=r-a,o=[],u=[],0!=this.dynamicTagsPre.length&&this.dynamicTagsPre.map(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.push(e.content);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),0!=this.dynamicTagsNow.length&&this.dynamicTagsNow.map(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.push(e.content);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),d=[],-1!=o.indexOf(n)){t.next=27;break}if(-1!=u.indexOf(n)){t.next=18;break}return t.next=14,Object(i["o"])({content:n,length:c});case 14:f=t.sent,h=f.data,t.next=22;break;case 18:return t.next=20,Object(i["e"])({content:n});case 20:g=t.sent,h=g.data;case 22:d={content:n,startIdx:a,endIdx:r,id:h},this.dynamicTagsNow.push(d),this.dynamicTags.push(d),t.next=28;break;case 27:this.$message({type:"info",message:"该实体已被预标记，请勿重复标记"});case 28:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleClose:function(t,e){var n=this;this.$confirm("此操作将永久删除该标签, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["a"])({content:t});case 2:return r=a.sent,s=r.data,a.next=6,Object(i["b"])({id_entity:s});case 6:n.dynamicTags.splice(e,1),n.$message({type:"success",message:"删除成功!"});case 8:case"end":return a.stop()}}),a)})))).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},saveTag:function(){var t=this;this.$confirm("此操作将保存已有标签, 且不能再添加新标签，确定要保存标记？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.dynamicTags.map((function(e){Object(i["p"])({id_sentence:t.textareaId,id_entity:e.id,start_index:e.startIdx,end_index:e.endIdx})})),Object(i["s"])({id:t.textareaId,is_marked:1}),t.isMarked=!1,t.$message({type:"success",message:"保存成功!"}),t.turnTo(2),t.dynamicTags=[],t.isMarked=!0;case 7:case"end":return e.stop()}}),e)})))).catch((function(){t.$message({type:"info",message:"已取消保存"})}))},turnTo:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=[],1!=e){t.next=7;break}return t.next=4,Object(i["m"])({id:this.textareaId});case 4:n=t.sent,t.next=11;break;case 7:if(2!=e){t.next=11;break}return t.next=10,Object(i["n"])({id:this.textareaId});case 10:n=t.sent;case 11:return a=n.data[0],this.textarea=a.content,this.textareaId=a.id,t.next=16,Object(i["g"])({id:this.textareaId});case 16:r=t.sent,this.textIndex=r.data,this.dynamicTags=[],this.dynamicTagsPre=[],this.dynamicTagsNow=[],this.preTag();case 22:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},o=c,u=(n("0e4e"),n("2877")),d=Object(u["a"])(o,a,r,!1,null,"04a3534d",null);e["default"]=d.exports},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"6b54":function(t,e,n){"use strict";n("3846");var a=n("cb7c"),r=n("0bfb"),s=n("9e1e"),i="toString",c=/./[i],o=function(t){n("2aba")(RegExp.prototype,i,t,!0)};n("79e5")((function(){return"/a/b"!=c.call({source:"a",flags:"b"})}))?o((function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?r.call(t):void 0)})):c.name!=i&&o((function(){return c.call(this)}))}}]);